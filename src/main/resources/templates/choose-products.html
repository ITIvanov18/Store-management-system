<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ò–∑–±–æ—Ä –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/choose-products.css}" href="/css/choose-products.css">

    <script src="/js/choose-products.js"></script>

</head>
<body class="container py-5">

<h2 class="text-center mb-5">üß∫ –ò–∑–±–µ—Ä–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –æ—Ç <span th:text="${store.storeName}">–ú–∞–≥–∞–∑–∏–Ω</span></h2>

<form th:action="@{'/purchase/store/' + ${store.id} + '/purchase'}" method="post">
    <div class="product-grid">
        <div th:each="product : ${products}" class="product-card">
                <h5 th:text="${product.productName}" class="mb-3">–ò–º–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç</h5>
                <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> <span th:text="${product.category}">FOOD</span></p>
                <p><strong>–ù–∞–ª–∏—á–Ω–æ—Å—Ç:</strong> <span th:text="${product.quantity}">10</span></p>
                <p><strong>–¶–µ–Ω–∞:</strong> <span th:text="${#strings.concat(productPrices[product.id], ' –ª–≤.')}">0.00 –ª–≤.</span></p>


                <div class="mt-3">
                    <label th:for="'quantity-' + ${product.id}" class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <label>
                        <input type="number"
                               th:id="'quantity-' + ${product.id}"
                               th:name="'quantities[' + ${product.id} + ']'"
                               min="1" max="99"
                               class="form-control product-quantity"
                               placeholder="0">
                    </label>
                </div>
            </div>
        </div>


    <div class="modal fade" id="stockErrorModal" tabindex="-1" aria-labelledby="stockErrorModalLabel" aria-hidden="true"
         th:if="${error}">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="stockErrorModalLabel">–ù–µ–¥–æ—Å—Ç–∞—Ç—ä—á–Ω–∞ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞—Ç–≤–æ—Ä–∏"></button>
                </div>
                <div class="modal-body">
                    <p th:text="${error}">–ì—Ä–µ—à–∫–∞</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞—Ç–≤–æ—Ä–∏</button>
                </div>
            </div>
        </div>
    </div>

    <form method="post" th:action="@{'/purchase/store/' + ${store.id} + '/purchase'}">
        <div class="text-center mt-5">
            <button type="submit" class="btn btn-primary btn-lg rounded-pill px-5">–ö—ä–º –∫–∞—Å–∏—Ç–µ ‚Üí</button>
        </div>
    </form>

    <div class="text-center mt-3">
        <a th:href="@{'/purchase/start'}" class="btn btn-outline-light btn-lg rounded-pill px-4">
            ‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫—ä–º –º–∞–≥–∞–∑–∏–Ω–∏—Ç–µ
        </a>
    </div>
</form>

</body>

</html>
